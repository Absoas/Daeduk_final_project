<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<script type="text/javascript" src="${pageContext.request.contextPath}/js/ckeditor/ckeditor.js"></script>
<script type="text/javascript">
	$.getContextPath = function(){
		return "${pageContext.request.contextPath}";
	}
	
	function deleteFunc(review_no){
		var notice_pass = prompt("비밀번호 입력");
		if(!notice_pass) return;
		document.deleteForm.notice_pass.value=notice_pass;
		document.deleteForm.submit();
	}
	<c:if test="${not empty message}">
		alert("${message}");
	</c:if>
	
</script>

<section class="s-content">
	<div class="row masonry-wrap">
	<form name="deleteForm" action="<c:url value='/noticeboard/noticeboardDelete.do' />" method="post">
		<input type="hidden" name="notice_no" value="${notice.notice_no }" />
		<input type="hidden" name="notice_pass" />
		
	</form>
	<table class="table">
		<tr>
			<th>게시글 번호</th>
			<td>${notice.notice_no}</td>
		</tr>
		<tr>
			<th>작성자</th>
			<td>${notice.person_id}</td>
		</tr>
		<tr>
			<th>제목</th>
			<td>${notice.notice_title}</td>
		</tr>
		<tr>
			<th>첨부파일</th>
			<td>
				<c:forEach items="${notice.noticeFileList }" var="notice" varStatus="vs">
					<c:url value="/noticeboard/noticeboardDownload.do" var="downloadURL">
						<c:param name="what" value="${notice.notice_file_no }" />
					</c:url>
					<a href="${downloadURL }">${notice.notice_file_name }</a>
					<c:if test="${not vs.last }">&nbsp;|&nbsp;</c:if>
				</c:forEach>
			</td>
		</tr>
		<tr>
			<th>내용</th>
			<td>${notice.notice_content}</td>
		</tr>
		<tr>
			<th>작성날짜</th>
			<td>${notice.notice_date}</td>
		</tr>
		<tr>
			<th>조회수</th>
			<td>${notice.notice_view_count}</td>
		</tr>
		<tr>
			<td colspan="2">
				<c:url value="/noticeboard/noticeboardUpdate.do" var="updateURL">
					<c:param name="what" value="${notice.notice_no }" />
				</c:url>
				<input type="button" value="수정" 
					onclick="location.href='${updateURL}';"
				/>
				<input type="button" value="삭제" 
					onclick="deleteFunc(${notice.notice_no});"
				/>
			</td>
		</tr>
	</table>
	</div>
</section>