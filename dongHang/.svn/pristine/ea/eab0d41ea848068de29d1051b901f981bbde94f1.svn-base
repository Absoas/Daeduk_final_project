<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Insert title here</title>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  
<script>

function makeList(data){
	var body ="";
	var regex = /^(\s+)/;
	var boardList = data.dataList;
	if(boardList){
		$.each(boardList, function(i, board){
			var testArray = regex.exec(suggest.suggest_board_title);
			if (testArray && testArray.length > 0) {
				console.log(suggest.suggest_board_title+"- -"+testArray[1]+"-");
				suggest.suggest_board_title = suggest.suggest_board_title.replace(regex, Array(testArray[1].lenght).join("&nbsp;"));
			}
			body+="<tr><td>${suggest.suggest_board_no }</td>";
			body+="<td>${suggest.suggest_board_title }</td>";
			body+="<c:forEach items='${suggest.personList}' var='person'>";
			body+="<td>${person.person_name}</td>";
			body+="</c:forEach>";
			body+="<td>${suggest.suggest_board_date }</td></tr>";
		})
	}else{
		body+="<tr><td colspan='4'>게시글 없음</td></tr>";
	}
	$('#navTag').html(data.pagingHTML);
	$('#bodyList').html(body);



$(function(){
	<c:url value="/suggest/suggestView.do" var="boardView" />
	$("#bodyList").on("click", "tr", function(){
		var what = $(this).find("td:nth-child(1)").text();
		location.href="${boardView}?what="+what;
	});
});

function ${pagingVO.funcName}(page){
	$("[name='searchForm']").find("[name='page']").val(page);
	$("[name='searchForm']").submit();
}
</script>

</head>
<body>
<span><a href="<c:url value="/qnaboard/qnaboardList.do" />">QNA게시판조회</a></span>

	<table border="1">
		<thead>
	<tr>
		<td>
			<form action = "<c:url value="/suggest/suggestList.do"/>" name="searchForm">
				<select name = "searchType">
					<option value = "">전체</option>
					<option value = "writer">작성자</option>
					<option value = "title">제목</option>
					<option value = "content">내용</option>
				</select>
				
				<script type="text/javascript">
						$('[name="searchType"]').val("${param.searchType}");
				</script>
				
				<input type = "text" name = "searchWord" value = "${param.searchWord }"/>
				<input type = "submit" value = "검색"/>
			</form>
			</td>
			</tr>		
			<tr>
				<th>글번호</th>
				<th>글제목</th>
				<th>글내용</th>
				<th>날짜</th>
			</tr>
		</thead>
		<tbody id="bodyList">
		<c:if test="${not empty suggestList}">
			<c:forEach items="${suggestList}" var="suggest">
				<tr>
					<td>${suggest.suggest_board_no}</td>
					<td>${suggest.suggest_board_title}</td>
					<td>${suggest.suggest_board_content}</td>
					<td>${suggest.suggest_board_date}</td>
				</tr>
			</c:forEach>
		</c:if>
		
		
</tbody>
	<tfoot>
		<tr>
			<td colspan="4">
				<nav id="navTag">
				${pagingVO.pagingHTML }
				</nav>
			</td>
		</tr>
	</tfoot>


	</table>


	<INPUT type="button" value="글쓰기"
		onclick="location.href='<c:url value="/suggestboard/suggestboardInsert.do"/>'" />
</body>
</html>